import e,{useState as n,useCallback as t,createElement as o,useRef as r,useEffect as i,forwardRef as a,useImperativeHandle as s,cloneElement as c}from"react";import l from"react-dom";var u,d={exports:{}};
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/u=d,function(){var e={}.hasOwnProperty;function n(){for(var t=[],o=0;o<arguments.length;o++){var r=arguments[o];if(r){var i=typeof r;if("string"===i||"number"===i)t.push(r);else if(Array.isArray(r)&&r.length){var a=n.apply(null,r);a&&t.push(a)}else if("object"===i)for(var s in r)e.call(r,s)&&r[s]&&t.push(s)}}return t.join(" ")}u.exports?(n.default=n,u.exports=n):window.classNames=n}();var f=d.exports;function p(e,n){return"pixels"===n?e:"percentage"===n?e+"%":""}function m(e){return e?{onClick:e,role:"button",tabIndex:0,onKeyDown:n=>{"Enter"!==n.key&&" "!==n.key||e(n)}}:{}}const h=function(e){return o("div",{className:f("mx-image-viewer",{"mx-image-viewer-responsive":e.responsive},e.className,{hidden:!e.hasImage})},e.children)},v=function(e){return o("div",{className:f("mx-image-viewer","mx-image-background",e.className),onClick:e.onClick,style:{...e.style,height:p(e.height,e.heightUnit),width:p(e.width,e.widthUnit),backgroundImage:"url('".concat(e.image,"')")}},e.children)},g=function(e){const n=e.altText?{"aria-label":e.altText,role:"img"}:{},t=m(e.onClick);return o("span",{className:f("glyphicon",e.icon),style:{...e.style,fontSize:"".concat(e.size,"px")},...n,...t})},y=function(e){const n=m(e.onClick);return o("img",{className:e.className,src:e.image,style:{...e.style,height:p(e.height,e.heightUnit),width:p(e.width,e.widthUnit)},alt:e.altText,...n})};function b(){return(b=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}).apply(this,arguments)}function w(e){return e&&e.ownerDocument||document}function C(e){void 0===e&&(e=w());try{var n=e.activeElement;return n&&n.nodeName?n:null}catch(n){return e.body}}function x(e,n){return e.contains?e.contains(n):e.compareDocumentPosition?e===n||!!(16&e.compareDocumentPosition(n)):void 0}var k=!("undefined"==typeof window||!window.document||!window.document.createElement),E=!1,O=!1;try{var S={get passive(){return E=!0},get once(){return O=E=!0}};k&&(window.addEventListener("test",S,S),window.removeEventListener("test",S,!0))}catch($){}function N(e,n,t,o){return function(e,n,t,o){if(o&&"boolean"!=typeof o&&!O){var r=o.once,i=o.capture,a=t;!O&&r&&(a=t.__once||function e(o){this.removeEventListener(n,e,i),t.call(this,o)},t.__once=a),e.addEventListener(n,a,E?o:i)}e.addEventListener(n,t,o)}(e,n,t,o),function(){!function(e,n,t,o){var r=o&&"boolean"!=typeof o?o.capture:o;e.removeEventListener(n,t,r),t.__once&&e.removeEventListener(n,t.__once,r)}(e,n,t,o)}}var T={exports:{}},L={},P="function"==typeof Symbol&&Symbol.for,j=P?Symbol.for("react.element"):60103,F=P?Symbol.for("react.portal"):60106,$=P?Symbol.for("react.fragment"):60107,D=P?Symbol.for("react.strict_mode"):60108,_=P?Symbol.for("react.profiler"):60114,I=P?Symbol.for("react.provider"):60109,M=P?Symbol.for("react.context"):60110,U=P?Symbol.for("react.async_mode"):60111,A=P?Symbol.for("react.concurrent_mode"):60111,R=P?Symbol.for("react.forward_ref"):60112,B=P?Symbol.for("react.suspense"):60113,z=P?Symbol.for("react.suspense_list"):60120,V=P?Symbol.for("react.memo"):60115,H=P?Symbol.for("react.lazy"):60116,W=P?Symbol.for("react.block"):60121,K=P?Symbol.for("react.fundamental"):60117,q=P?Symbol.for("react.responder"):60118,Y=P?Symbol.for("react.scope"):60119;function Z(e){if("object"==typeof e&&null!==e){var n=e.$$typeof;switch(n){case j:switch(e=e.type){case U:case A:case $:case _:case D:case B:return e;default:switch(e=e&&e.$$typeof){case M:case R:case H:case V:case I:return e;default:return n}}case F:return n}}}function X(e){return Z(e)===A}L.AsyncMode=U,L.ConcurrentMode=A,L.ContextConsumer=M,L.ContextProvider=I,L.Element=j,L.ForwardRef=R,L.Fragment=$,L.Lazy=H,L.Memo=V,L.Portal=F,L.Profiler=_,L.StrictMode=D,L.Suspense=B,L.isAsyncMode=function(e){return X(e)||Z(e)===U},L.isConcurrentMode=X,L.isContextConsumer=function(e){return Z(e)===M},L.isContextProvider=function(e){return Z(e)===I},L.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===j},L.isForwardRef=function(e){return Z(e)===R},L.isFragment=function(e){return Z(e)===$},L.isLazy=function(e){return Z(e)===H},L.isMemo=function(e){return Z(e)===V},L.isPortal=function(e){return Z(e)===F},L.isProfiler=function(e){return Z(e)===_},L.isStrictMode=function(e){return Z(e)===D},L.isSuspense=function(e){return Z(e)===B},L.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===$||e===A||e===_||e===D||e===B||e===z||"object"==typeof e&&null!==e&&(e.$$typeof===H||e.$$typeof===V||e.$$typeof===I||e.$$typeof===M||e.$$typeof===R||e.$$typeof===K||e.$$typeof===q||e.$$typeof===Y||e.$$typeof===W)},L.typeOf=Z;
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;!function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},t=0;t<10;t++)n["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(n).map((function(e){return n[e]})).join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach((function(e){o[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}()||Object.assign;Function.call.bind(Object.prototype.hasOwnProperty);function G(){}function J(){}J.resetWarningCache=G;T.exports=function(){function e(e,n,t,o,r,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function n(){return e}e.isRequired=e;var t={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:J,resetWarningCache:G};return t.PropTypes=t,t}();var Q=T.exports;function ee(e){var n,t,o=((t=r(n=e)).current=n,t);i((function(){return function(){return o.current()}}),[])}function ne(e){var n=function(e){var n=r(e);return i((function(){n.current=e}),[e]),n}(e);return t((function(){return n.current&&n.current.apply(n,arguments)}),[n])}function te(e,n){e.classList?e.classList.add(n):function(e,n){return e.classList?!!n&&e.classList.contains(n):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+n+" ")}(e,n)||("string"==typeof e.className?e.className=e.className+" "+n:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+n))}function oe(e,n){return e.replace(new RegExp("(^|\\s)"+n+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function re(e,n){e.classList?e.classList.remove(n):"string"==typeof e.className?e.className=oe(e.className,n):e.setAttribute("class",oe(e.className&&e.className.baseVal||"",n))}function ie(e,n){return function(e){var n=w(e);return n&&n.defaultView||window}(e).getComputedStyle(e,n)}var ae=/([A-Z])/g;var se=/^ms-/;function ce(e){return function(e){return e.replace(ae,"-$1").toLowerCase()}(e).replace(se,"-ms-")}var le,ue=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function de(e,n){var t="",o="";if("string"==typeof n)return e.style.getPropertyValue(ce(n))||ie(e).getPropertyValue(ce(n));Object.keys(n).forEach((function(r){var i=n[r];i||0===i?!function(e){return!(!e||!ue.test(e))}(r)?t+=ce(r)+": "+i+";":o+=r+"("+i+") ":e.style.removeProperty(ce(r))})),o&&(t+="transform: "+o+";"),e.style.cssText+=";"+t}function fe(e){return"window"in e&&e.window===e?e:"nodeType"in(n=e)&&n.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var n}function pe(e){var n;return fe(e)||(n=e)&&"body"===n.tagName.toLowerCase()?function(e){var n=fe(e)?w():w(e),t=fe(e)||n.defaultView;return n.body.clientWidth<t.innerWidth}(e):e.scrollHeight>e.clientHeight}var me=["template","script","style"],he=function(e,n,t){[].forEach.call(e.children,(function(e){var o,r,i;-1===n.indexOf(e)&&(r=(o=e).nodeType,i=o.tagName,1===r&&-1===me.indexOf(i.toLowerCase()))&&t(e)}))};function ve(e,n){n&&(e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden"))}var ge,ye=function(){function e(e){var n=void 0===e?{}:e,t=n.hideSiblingNodes,o=void 0===t||t,r=n.handleContainerOverflow,i=void 0===r||r;this.hideSiblingNodes=void 0,this.handleContainerOverflow=void 0,this.modals=void 0,this.containers=void 0,this.data=void 0,this.scrollbarSize=void 0,this.hideSiblingNodes=o,this.handleContainerOverflow=i,this.modals=[],this.containers=[],this.data=[],this.scrollbarSize=function(e){if((!le&&0!==le||e)&&k){var n=document.createElement("div");n.style.position="absolute",n.style.top="-9999px",n.style.width="50px",n.style.height="50px",n.style.overflow="scroll",document.body.appendChild(n),le=n.offsetWidth-n.clientWidth,document.body.removeChild(n)}return le}()}var n=e.prototype;return n.isContainerOverflowing=function(e){var n=this.data[this.containerIndexFromModal(e)];return n&&n.overflowing},n.containerIndexFromModal=function(e){return n=this.data,t=function(n){return-1!==n.modals.indexOf(e)},o=-1,n.some((function(e,n){return!!t(e,n)&&(o=n,!0)})),o;var n,t,o},n.setContainerStyle=function(e,n){var t={overflow:"hidden"};e.style={overflow:n.style.overflow,paddingRight:n.style.paddingRight},e.overflowing&&(t.paddingRight=parseInt(de(n,"paddingRight")||"0",10)+this.scrollbarSize+"px"),de(n,t)},n.removeContainerStyle=function(e,n){Object.assign(n.style,e.style)},n.add=function(e,n,t){var o=this.modals.indexOf(e),r=this.containers.indexOf(n);if(-1!==o)return o;if(o=this.modals.length,this.modals.push(e),this.hideSiblingNodes&&function(e,n){var t=n.dialog,o=n.backdrop;he(e,[t,o],(function(e){return ve(!0,e)}))}(n,e),-1!==r)return this.data[r].modals.push(e),o;var i={modals:[e],classes:t?t.split(/\s+/):[],overflowing:pe(n)};return this.handleContainerOverflow&&this.setContainerStyle(i,n),i.classes.forEach(te.bind(null,n)),this.containers.push(n),this.data.push(i),o},n.remove=function(e){var n=this.modals.indexOf(e);if(-1!==n){var t=this.containerIndexFromModal(e),o=this.data[t],r=this.containers[t];if(o.modals.splice(o.modals.indexOf(e),1),this.modals.splice(n,1),0===o.modals.length)o.classes.forEach(re.bind(null,r)),this.handleContainerOverflow&&this.removeContainerStyle(o,r),this.hideSiblingNodes&&function(e,n){var t=n.dialog,o=n.backdrop;he(e,[t,o],(function(e){return ve(!1,e)}))}(r,e),this.containers.splice(t,1),this.data.splice(t,1);else if(this.hideSiblingNodes){var i=o.modals[o.modals.length-1],a=i.backdrop;ve(!1,i.dialog),ve(!1,a)}}},n.isTopModal=function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e},e}(),be=function(e){var n;return"undefined"==typeof document?null:null==e?w().body:("function"==typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(n=e)&&n.nodeType&&e||null)};function we(e){var n=e||(ge||(ge=new ye),ge),o=r({dialog:null,backdrop:null});return Object.assign(o.current,{add:function(e,t){return n.add(o.current,e,t)},remove:function(){return n.remove(o.current)},isTopModal:function(){return n.isTopModal(o.current)},setDialogRef:t((function(e){o.current.dialog=e}),[]),setBackdropRef:t((function(e){o.current.backdrop=e}),[])})}var Ce=a((function(t,o){var a=t.show,c=void 0!==a&&a,u=t.role,d=void 0===u?"dialog":u,f=t.className,p=t.style,m=t.children,h=t.backdrop,v=void 0===h||h,g=t.keyboard,y=void 0===g||g,w=t.onBackdropClick,E=t.onEscapeKeyDown,O=t.transition,S=t.backdropTransition,T=t.autoFocus,L=void 0===T||T,P=t.enforceFocus,j=void 0===P||P,F=t.restoreFocus,$=void 0===F||F,D=t.restoreFocusOptions,_=t.renderDialog,I=t.renderBackdrop,M=void 0===I?function(n){return e.createElement("div",n)}:I,U=t.manager,A=t.container,R=t.containerClassName,B=t.onShow,z=t.onHide,V=void 0===z?function(){}:z,H=t.onExit,W=t.onExited,K=t.onExiting,q=t.onEnter,Y=t.onEntering,Z=t.onEntered,X=function(e,n){if(null==e)return{};var t,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(t,["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","backdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","containerClassName","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"]),G=function(e,t){var o=n((function(){return be(e)})),r=o[0],a=o[1];if(!r){var s=be(e);s&&a(s)}return i((function(){t&&r&&t(r)}),[t,r]),i((function(){var n=be(e);n!==r&&a(n)}),[e,r]),r}(A),J=we(U),Q=function(){var e=r(!0),n=r((function(){return e.current}));return i((function(){return function(){e.current=!1}}),[]),n.current}(),te=function(e){var n=r(null);return i((function(){n.current=e})),n.current}(c),oe=n(!c),re=oe[0],ie=oe[1],ae=r(null);s(o,(function(){return J}),[J]),k&&!te&&c&&(ae.current=C()),O||c||re?c&&re&&ie(!1):ie(!0);var se=ne((function(){if(J.add(G,R),pe.current=N(document,"keydown",de),fe.current=N(document,"focus",(function(){return setTimeout(le)}),!0),B&&B(),L){var e=C(document);J.dialog&&e&&!x(J.dialog,e)&&(ae.current=e,J.dialog.focus())}})),ce=ne((function(){var e;(J.remove(),null==pe.current||pe.current(),null==fe.current||fe.current(),$)&&(null==(e=ae.current)||null==e.focus||e.focus(D),ae.current=null)}));i((function(){c&&G&&se()}),[c,G,se]),i((function(){re&&ce()}),[re,ce]),ee((function(){ce()}));var le=ne((function(){if(j&&Q()&&J.isTopModal()){var e=C();J.dialog&&e&&!x(J.dialog,e)&&J.dialog.focus()}})),ue=ne((function(e){e.target===e.currentTarget&&(null==w||w(e),!0===v&&V())})),de=ne((function(e){y&&27===e.keyCode&&J.isTopModal()&&(null==E||E(e),e.defaultPrevented||V())})),fe=r(),pe=r(),me=O;if(!G||!(c||me&&!re))return null;var he=b({role:d,ref:J.setDialogRef,"aria-modal":"dialog"===d||void 0},X,{style:p,className:f,tabIndex:-1}),ve=_?_(he):e.createElement("div",he,e.cloneElement(m,{role:"document"}));me&&(ve=e.createElement(me,{appear:!0,unmountOnExit:!0,in:!!c,onExit:H,onExiting:K,onExited:function(){ie(!0);for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];null==W||W.apply(void 0,n)},onEnter:q,onEntering:Y,onEntered:Z},ve));var ge=null;if(v){var ye=S;ge=M({ref:J.setBackdropRef,onClick:ue}),ye&&(ge=e.createElement(ye,{appear:!0,in:!!c},ge))}return e.createElement(e.Fragment,null,l.createPortal(e.createElement(e.Fragment,null,ge,ve),G))})),xe={show:Q.bool,container:Q.any,onShow:Q.func,onHide:Q.func,backdrop:Q.oneOfType([Q.bool,Q.oneOf(["static"])]),renderDialog:Q.func,renderBackdrop:Q.func,onEscapeKeyDown:Q.func,onBackdropClick:Q.func,containerClassName:Q.string,keyboard:Q.bool,transition:Q.elementType,backdropTransition:Q.elementType,autoFocus:Q.bool,enforceFocus:Q.bool,restoreFocus:Q.bool,restoreFocusOptions:Q.shape({preventScroll:Q.bool}),onEnter:Q.func,onEntering:Q.func,onEntered:Q.func,onExit:Q.func,onExiting:Q.func,onExited:Q.func,manager:Q.instanceOf(ye)};Ce.displayName="Modal",Ce.propTypes=xe;var ke=Object.assign(Ce,{Manager:ye});function Ee({onClose:e,...n}){return o("div",{className:"mx-image-viewer-lightbox-backdrop",...n},o("button",{className:f("btn btn-image btn-icon close-button"),onClick:e},o("img",{src:"data:image/svg+xml,%3Csvg%20width%3D%2232%22%20height%3D%2232%22%20viewBox%3D%220%200%2032%2032%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%20%20%20%20%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20d%3D%22M18.2222%2016.0003L26.5397%207.6828C27.1541%207.06838%2027.1541%206.07524%2026.5397%205.46082C25.9253%204.84639%2024.9321%204.84639%2024.3177%205.46082L16.0002%2013.7783L7.68279%205.46082C7.06837%204.84639%206.07524%204.84639%205.46082%205.46082C4.84639%206.07524%204.84639%207.06838%205.46082%207.6828L13.7783%2016.0003L5.46082%2024.3178C4.84639%2024.9323%204.84639%2025.9254%205.46082%2026.5398C5.76724%2026.8463%206.16952%2027.0003%206.5718%2027.0003C6.97408%2027.0003%207.37636%2026.8463%207.68279%2026.5398L16.0002%2018.2223L24.3177%2026.5398C24.6241%2026.8463%2025.0264%2027.0003%2025.4287%2027.0003C25.831%2027.0003%2026.2333%2026.8463%2026.5397%2026.5398C27.1541%2025.9254%2027.1541%2024.9323%2026.5397%2024.3178L18.2222%2016.0003Z%22%20fill%3D%22white%22%2F%3E%3C%2Fsvg%3E",className:"removeIcon",alt:"Close icon for the full screen image lightbox"})))}function Oe({isOpen:e,onClose:n,children:r}){const i=t((e=>o(Ee,{onClose:n,...e})),[n]),a=t((e=>{e.stopPropagation()}),[]);return o(ke,{show:e,onHide:n,renderBackdrop:i,onBackdropClick:a,className:"mx-image-viewer-lightbox"},o("div",null,r))}function Se(e,n){if(!e||"fullImage"===n)return e;const t=new URL(e);return t.searchParams.append("thumb","true"),t.href}const Ne=({class:e,style:r,widthUnit:i,width:a,heightUnit:s,height:l,iconSize:u,responsive:d,onClickType:p,onClick:m,type:b,image:w,altText:C,displayAs:x,previewMode:k,renderAsBackground:E,backgroundImageContent:O})=>{const{lightboxIsOpen:S,openLightbox:N,closeLightbox:T}=(()=>{const[e,o]=n(!1);return{lightboxIsOpen:e,openLightbox:t((()=>{o(!0)}),[]),closeLightbox:t((()=>{o(!1)}),[])}})(),L=t((e=>{null==e||e.stopPropagation(),T()}),[T]),P=t((e=>{e.stopPropagation(),"action"===p?null==m||m():"enlarge"===p&&N()}),[m,p,N]),j={style:r,onClick:"action"===p&&m||"enlarge"===p?P:void 0,altText:C},F="image"===b?o(y,{className:f({"img-thumbnail":"thumbnail"===x}),image:k?w:Se(w,x),height:l,heightUnit:s,width:a,widthUnit:i,...j}):o(g,{icon:w,size:u,...j});return E?o(v,{className:e,style:r,image:w,height:l,heightUnit:s,width:a,widthUnit:i,onClick:e=>{e.stopPropagation(),null==m||m()}},O):o(h,{className:e,responsive:d,hasImage:void 0!==w&&w.length>0},F,!k&&S&&o(Oe,{isOpen:S,onClose:L},"image"===b?c(F,{image:w,onClick:void 0}):F))};const Te=e=>{var n;const r=t((()=>{var n;return null===(n=e.onClick)||void 0===n?void 0:n.execute()}),[e.onClick]),{type:i,image:a}=function({datasource:e,imageIcon:n,imageObject:t,imageUrl:o,defaultImageDynamic:r}){var i,a;const s={type:"image",image:void 0};switch(e){case"image":return"available"===(null==t?void 0:t.status)?{type:"image",image:t.value.uri}:"unavailable"===(null==t?void 0:t.status)&&"available"===(null==r?void 0:r.status)?{type:"image",image:r.value.uri}:{type:"image",image:void 0};case"imageUrl":return{type:"image",image:"available"===(null==o?void 0:o.status)?o.value:void 0};case"icon":if("available"===(null==n?void 0:n.status)){if("glyph"===(null===(i=n.value)||void 0===i?void 0:i.type))return{type:"icon",image:n.value.iconClass};if("image"===(null===(a=n.value)||void 0===a?void 0:a.type))return{type:"image",image:n.value.iconUrl}}return s;default:return s}}(e),s="available"===(null===(n=e.alternativeText)||void 0===n?void 0:n.status)?e.alternativeText.value:void 0;return o(Ne,{class:e.class,style:e.style,widthUnit:e.widthUnit,width:e.width,heightUnit:e.heightUnit,height:e.height,iconSize:e.iconSize,responsive:e.responsive,onClickType:e.onClickType,onClick:e.onClick?r:void 0,type:i,image:a,altText:s,displayAs:e.displayAs,renderAsBackground:"icon"!==e.datasource&&e.isBackgroundImage,backgroundImageContent:e.children})};export{Te as Image};
